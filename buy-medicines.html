<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Buy Medicines | MyPharmAlly</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" />
</head>
<body>

<!-- 🔷 Navbar -->
<header class="navbar">
  <h1>MyPharmAlly</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="#">Orders</a>
    <a href="#">Help</a>
  </nav>
</header>

<!-- 🔷 Hero Section -->
<section class="hero-medicines" data-aos="fade-down">
  <h2>Buy Medicines Easily Online</h2>
  <p>Browse top-rated medicines or upload your doctor’s prescription.</p>
  <button class="btn" onclick="openPrescriptionModal()">📤 Upload Prescription</button>
</section>

<!-- 🔍 Search + Category Filters -->
<section class="search-filter" data-aos="fade-up">
  <input type="text" id="searchInput" placeholder="Search medicines..." aria-label="Search" oninput="filterMedicines()" />
  <div class="category-buttons">
    <button onclick="filterCategory('all')" class="active">All</button>
    <button onclick="filterCategory('Fever')">Fever</button>
    <button onclick="filterCategory('Cold')">Cold</button>
    <button onclick="filterCategory('Pain')">Pain</button>
    <button onclick="filterCategory('Diabetes')">Diabetes</button>
    <button onclick="filterCategory('Skin')">Skin</button>
    <button onclick="filterCategory('OTC')">OTC</button>
  </div>
</section>

<!-- 🧾 Medicine Grid -->
<section class="medicine-grid" id="medicineGrid" data-aos="fade-up">
  <!-- Product cards rendered by JS -->
</section>

<!-- ❌ No Result Message -->
<p id="noResults" style="text-align:center;font-weight:600;display:none;margin-top:30px;">😕 No results found.</p>

<!-- 📦 Product Detail Modal -->
<div class="modal" id="productDetailModal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeProductModal()">&times;</span>
    <h2 id="modalTitle">Medicine Name</h2>
    <img id="modalImage" src="" alt="" />
    <p id="modalDesc">Description</p>
    <p><strong>Price:</strong> ₹<span id="modalPrice">0</span></p>
    <p><strong>Category:</strong> <span id="modalCategory">Category</span></p>
    <button class="btn" onclick="closeProductModal()">Close</button>
  </div>
</div>

<!-- 📤 Upload Prescription Modal -->
<div class="modal" id="prescription-modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closePrescriptionModal()">&times;</span>
    <h2>Upload Your Prescription</h2>
    <form id="prescriptionForm">
      <input type="text" placeholder="Your Name" required />
      <input type="email" placeholder="Your Email" required />
      <input type="file" id="prescriptionFile" accept="image/*,application/pdf" required />
      <div id="previewBox" style="margin:10px 0;"></div>
      <button type="submit" class="btn">Upload</button>
    </form>
  </div>
</div>

<!-- 🔘 Floating Buttons -->
<button onclick="openPrescriptionModal()" aria-label="Upload Prescription"
  style="position:fixed;bottom:90px;right:20px;background:#1976d2;color:white;border:none;border-radius:50%;width:52px;height:52px;font-size:20px;z-index:999;">
  📤
</button>

<button onclick="window.scrollTo({ top: 0, behavior: 'smooth' })"
  style="position:fixed;bottom:20px;right:20px;background:#009688;border:none;color:white;width:48px;height:48px;border-radius:50%;font-size:22px;z-index:999;">
  ↑
</button>

<a href="https://wa.me/917051899758?text=Hello%2C%20I%20need%20help%20buying%20medicines%20on%20MyPharmAlly."
   target="_blank" title="Chat on WhatsApp"
   style="position:fixed;bottom:160px;right:20px;width:54px;height:54px;border-radius:50%;background:#25d366;color:white;display:flex;align-items:center;justify-content:center;font-size:26px;z-index:999;box-shadow:0 4px 12px rgba(0,0,0,0.3);">
  <i class="fab fa-whatsapp"></i>
</a>

<!-- 🔚 Footer -->
<footer class="site-footer">
  <p>&copy; 2025 MyPharmAlly. All rights reserved.</p>
</footer>

<!-- 🔌 Scripts -->
<script src="script.js"></script>
<script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
<script>
  AOS.init({ duration: 800, once: true });
  if (localStorage.getItem("theme") === "dark") {
    document.body.classList.add("dark-mode");
  }
</script>
<script>
  const medicines = [
    {
      id: "calpol500",
      name: "Calpol 500",
      price: 22,
      image: "images/calpol500.jpg",
      category: "Fever",
      tag: "OTC",
      delivery: "1-2 days",
      description: "Mild pain reliever and fever reducer for adults."
    },
    {
      id: "pantop40",
      name: "Pantop 40",
      price: 36,
      image: "images/pantop40.jpg",
      category: "Stomach",
      tag: "Prescription",
      delivery: "1-3 days",
      description: "Reduces acidity and heartburn symptoms effectively."
    }
    // Add more medicines...
  ];

  const grid = document.getElementById("medicineGrid");
  medicines.forEach(med => {
    const card = document.createElement("div");
    card.className = "medicine-card";
    card.setAttribute("data-category", med.category.toLowerCase());

    card.innerHTML = `
      <img src="${med.image}" alt="${med.name}" loading="lazy" />
      <h3>${med.name}</h3>
      <p class="price">₹${med.price}</p>
      <span class="tag">${med.tag}</span>
      <p class="delivery-label">🚚 ${med.delivery}</p>
      <div class="quantity-control">
        <label>Qty:</label>
        <input type="number" min="1" value="1" id="qty-${med.id}" />
      </div>
      <button class="btn" onclick="addToCart('${med.id}')">Add to Cart</button>
      <button class="btn secondary" onclick="openProductModal('${med.id}')">View Details</button>
    `;

    grid.appendChild(card);
  });

  function addToCart(id) {
    const qtyInput = document.getElementById(`qty-${id}`);
    const qty = parseInt(qtyInput.value);
    if (!qty || qty <= 0) {
      alert("Please enter a valid quantity.");
      return;
    }

    let cart = JSON.parse(localStorage.getItem("mypharm_cart")) || {};
    cart[id] = (cart[id] || 0) + qty;
    localStorage.setItem("mypharm_cart", JSON.stringify(cart));
    alert("✅ Added to cart!");
  }

  function openProductModal(id) {
    const med = medicines.find(m => m.id === id);
    if (!med) return;

    document.getElementById("modalTitle").innerText = med.name;
    document.getElementById("modalImage").src = med.image;
    document.getElementById("modalPrice").innerText = med.price;
    document.getElementById("modalCategory").innerText = med.category;
    document.getElementById("modalDesc").innerText = med.description;
    document.getElementById("productDetailModal").classList.add("show");
  }

  function closeProductModal() {
    document.getElementById("productDetailModal").classList.remove("show");
  }

  function filterMedicines() {
    const search = document.getElementById("searchInput").value.toLowerCase();
    const cards = document.querySelectorAll(".medicine-card");
    let visible = 0;

    cards.forEach(card => {
      const name = card.querySelector("h3").textContent.toLowerCase();
      if (name.includes(search)) {
        card.style.display = "block";
        visible++;
      } else {
        card.style.display = "none";
      }
    });

    document.getElementById("noResults").style.display = visible === 0 ? "block" : "none";
  }

  function filterCategory(cat) {
    const buttons = document.querySelectorAll(".category-buttons button");
    buttons.forEach(btn => btn.classList.remove("active"));
    event.target.classList.add("active");

    const cards = document.querySelectorAll(".medicine-card");
    cards.forEach(card => {
      if (cat === "all" || card.dataset.category === cat.toLowerCase()) {
        card.style.display = "block";
      } else {
        card.style.display = "none";
      }
    });

    document.getElementById("noResults").style.display = "none";
  }
</script>
<!-- 🔹 Hero Section -->
<section class="hero-medicines" data-aos="fade-down">
  <h2>Order Genuine Medicines Online</h2>
  <p>From the valleys of Kashmir — for the people we love.</p>
  <button class="btn" onclick="openPrescriptionModal()">📤 Upload Prescription</button>
</section>

<!-- 🔍 Search & Categories -->
<section class="search-filter" data-aos="fade-up">
  <input type="text" id="searchInput" placeholder="Search medicines..." aria-label="Search Medicines" oninput="filterMedicines()" />
  <div class="category-buttons">
    <button onclick="filterCategory('all')" class="active">All</button>
    <button onclick="filterCategory('OTC')">OTC</button>
    <button onclick="filterCategory('Fever')">Fever</button>
    <button onclick="filterCategory('Pain')">Pain</button>
    <button onclick="filterCategory('Skin')">Skin</button>
    <button onclick="filterCategory('Supplements')">Supplements</button>
    <button onclick="filterCategory('Diabetes')">Diabetes</button>
  </div>
</section>
<!-- 🔹 Medicine Cards Grid -->
<section class="medicine-grid" id="medicineGrid" data-aos="fade-up">
  <!-- Medicine Card Example -->
  <div class="medicine-card" data-category="OTC">
    <img src="images/paracetamol.jpg" alt="Paracetamol Strip">
    <h3>Paracetamol 500mg</h3>
    <div class="price">₹25</div>
    <div class="tag">Fever</div>
    <div class="delivery-label">Delivery in 2-3 days</div>
    <div class="quantity-control">
      <label for="qty1">Qty:</label>
      <input type="number" id="qty1" value="1" min="1" />
    </div>
    <button class="btn" onclick="addToCart('Paracetamol', 25, 'qty1')">Add to Cart</button>
    <button class="btn secondary" onclick="openMedicineModal('Paracetamol 500mg', 'Used to reduce fever and relieve pain.', 'images/paracetamol.jpg')">View Details</button>
  </div>

  <!-- You can duplicate more cards like this with different data-category and details -->
</section>
<!-- 🔹 Prescription Upload Modal -->
<div class="modal" id="prescription-modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closePrescriptionModal()">&times;</span>
    <h3>Upload Your Prescription</h3>
    <input type="text" placeholder="Full Name" required />
    <input type="email" placeholder="Email Address" required />
    <input type="file" accept="image/*,.pdf" />
    <button class="btn" onclick="submitPrescription()">Submit</button>
  </div>
</div>
<script>
  function openPrescriptionModal() {
    document.getElementById("prescription-modal").classList.add("show");
  }
  function closePrescriptionModal() {
    document.getElementById("prescription-modal").classList.remove("show");
  }
  function submitPrescription() {
    alert("📤 Prescription uploaded successfully!");
    closePrescriptionModal();
  }
</script>
<!-- 🔹 Medicine Detail Modal -->
<div class="modal" id="medicine-detail-modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeMedicineModal()">&times;</span>
    <img id="medicineImg" src="" alt="Medicine Image" style="max-width: 100%; margin-bottom: 15px;">
    <h3 id="medicineTitle">Medicine Name</h3>
    <p id="medicineDesc">Medicine description will appear here.</p>
  </div>
</div>
<script>
  function openMedicineModal(title, description, imgSrc) {
    document.getElementById("medicineTitle").textContent = title;
    document.getElementById("medicineDesc").textContent = description;
    document.getElementById("medicineImg").src = imgSrc;
    document.getElementById("medicine-detail-modal").classList.add("show");
  }

  function closeMedicineModal() {
    document.getElementById("medicine-detail-modal").classList.remove("show");
  }
</script>
<!-- 🔹 WhatsApp Support Button -->
<a href="https://wa.me/917051899758?text=Hello!%20I%20need%20help%20buying%20medicines%20on%20MyPharmAlly."
   class="fab-button whatsapp" title="Chat with us on WhatsApp" target="_blank">
  <i class="fab fa-whatsapp"></i>
</a>

<!-- 🔹 View Cart Button -->
<a href="cart.html" class="fab-button cart-icon" title="View Cart">
  🛒 <span id="cartCount">0</span>
</a>
<script>
  // Update Cart Count
  const cartData = JSON.parse(localStorage.getItem("mypharm_cart")) || {};
  const itemCount = Object.values(cartData).reduce((a, b) => a + b, 0);
  document.getElementById("cartCount").innerText = itemCount;
</script>

</body>
</html>
